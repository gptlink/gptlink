var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;import{r,m as u,_ as s,u as c,d as i,k as l,n as f,$ as m,h as p,i as d,c as g,f as h,K as v,a0 as y,s as b,a as w,M as L,w as M,e as R}from"./vendor.805d0475.js";import{t as C,g as _,s as j,_ as k}from"./index.303de588.js";import{_ as A,a as I}from"./index.f4425738.js";import O from"./index.787604f7.js";const P={},x=[];Object.keys(P).forEach((e=>{const t=P[e].default||{},n=Array.isArray(t)?[...t]:[t];x.push(...n)}));const H=[];async function T(){return j.getters.getFrontMenuList.filter((e=>!e.hideMenu))}(()=>{x.sort(((e,t)=>(e.orderNo||0)-(t.orderNo||0)));for(const e of x)H.push(C(e))})();async function S(e){const t=await T(),n=await _(t,e);return null==n?void 0:n[0]}function D(e){const t=r([]),{currentRoute:n}=u();return s([()=>c(n).path,()=>c(e)],(async([e])=>{const{meta:t}=c(n),o=t.currentActiveMenu;let a=await S(e);a||(a=await S(o))}),{immediate:!0}),s([()=>c(n).path],(()=>{!async function(){t.value=await(async()=>await T())()}()}),{immediate:!0}),{menusRef:t}}var E=k(i({components:{CbMenu:A},setup(e){const t=l(),n=f((()=>t.getters.getWebConfig||{})),{menusRef:o}=D(m(e,"splitType"));return{getCommonProps:f((()=>c(o))),useRouter:u,webConfig:n}}}),[["render",function(e,t,n,o,a,r){const u=p("CbMenu");return d(),g("div",null,[h(u,{webLogo:e.webConfig.web_logo,homeIcon:"cb-iconfont cb-icon-homepage_fill",menus:e.getCommonProps,useRouter:e.useRouter},null,8,["webLogo","menus","useRouter"])])}]]);const F=i({name:"LayoutHeader",components:{CbHeader:I},setup(){const e=l(),t=u(),n=f((()=>e.getters.getUserInfo||{})),{breadcrumbList:o}=function(){const{currentRoute:e,getRoutes:t}=u(),n=t(),o=r([]);return v((()=>{var t,a,r,u;const{matched:s}=e.value,c=[];if("/login"===s[0].path||"/"===(null==(t=s[1])?void 0:t.path)||"/:path(.*)*"===(null==(a=s[1])?void 0:a.path))return void(o.value=[]);const{meta:i}=e.value;let l="";i&&i.currentActiveMenu&&(l=i.currentActiveMenu);for(let e=0;e<s.length;e++){const t=s[e];if((null==(r=t.meta)?void 0:r.currentActiveMenu)&&l===(null==(u=t.meta)?void 0:u.currentActiveMenu)){const e=n.find((e=>e.path===l));e&&c.push(e)}t.meta.title&&c.push(t)}o.value=[{path:"/",meta:{title:"首页"}},...c]})),{breadcrumbList:o}}();return{userInfo:n,handleLogout:function(){y.confirm("确认退出登录吗？","提示").then((n=>{e.commit("logout"),t.replace({path:"/login"})})).catch((e=>{}))},pageTitle:f((()=>{var e;const t=c(o);if(t.length>0){const n=t[t.length-1];return(null==(e=null==n?void 0:n.meta)?void 0:e.title)||""}return""}))}}});const N=i({name:"App",components:{LayoutMenu:E,LayoutHeader:k(F,[["render",function(e,t,n,o,a,r){const u=p("CbHeader");return d(),b(u,{pageTitle:e.pageTitle,picture:e.userInfo.avatar,nickname:e.userInfo.nickname,onClickDropdown:e.handleLogout},null,8,["pageTitle","picture","nickname","onClickDropdown"])}]]),PageLayout:O},setup(){const e=w({isShowRouter:!1});return l().dispatch("getUserInfo",{isForced:!1,callback:()=>{e.isShowRouter=!0}}),((e,r)=>{for(var u in r||(r={}))n.call(r,u)&&a(e,u,r[u]);if(t)for(var u of t(r))o.call(r,u)&&a(e,u,r[u]);return e})({},L(e))}}),U={class:"common-layout"};var K=k(N,[["render",function(e,t,n,o,a,r){const u=p("LayoutMenu"),s=p("LayoutHeader"),c=p("PageLayout"),i=p("el-main"),l=p("el-container");return d(),g("div",U,[h(l,{style:{height:"100vh"}},{default:M((()=>[h(u),h(l,{style:{"flex-direction":"column"}},{default:M((()=>[h(s),h(i,{class:"layout-content"},{default:M((()=>[e.isShowRouter?(d(),b(c,{key:0})):R("",!0)])),_:1})])),_:1})])),_:1})])}],["__scopeId","data-v-7007fef4"]]);export{K as default};
